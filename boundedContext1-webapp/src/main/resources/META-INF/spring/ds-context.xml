<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:tx="http://www.springframework.org/schema/tx"
	xmlns:mongo="http://www.springframework.org/schema/data/mongo"	
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.1.xsd
				http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-4.1.xsd
				http://www.springframework.org/schema/data/mongo http://www.springframework.org/schema/data/mongo/spring-mongo-1.5.xsd">
	
	<!-- ******************************************** -->
	<!-- BEANS RELACIONAT AMB LA PERSISTENCIA /SPRING -->
	<!-- ******************************************** -->

<!-- 	 <bean class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor" />   -->
	 
	 <!-- the transactional advice (what 'happens'; see the <aop:advisor/> bean below) 
    <tx:advice id="txAdvice" transaction-manager="transactionManager"> -->
        <!-- the transactional semantics... -->
        <!-- <tx:attributes> -->
            <!-- all methods starting with 'get' are read-only -->
            <!-- <tx:method name="get*" read-only="true"/>
            other methods use the default transaction settings (see below)
            <tx:method name="*"/>
        </tx:attributes>
    </tx:advice>  -->


	<!-- ********************* -->
	<!-- EntityManagerFactoryS -->	
	<!-- ********************* -->
	 <bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalEntityManagerFactoryBean">
          <property name="persistenceUnitName" value="transactions-optional" />          
    </bean>   

 	<!-- <bean id="entityManagerFactoryMongo" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean" lazy-init="true">        
          <property name="persistenceUnitName" value="mongodb" />
    </bean>  --> 

	<!-- TransactionManagerS -->
	 <bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
		<property name="entityManagerFactory" ref="entityManagerFactory" />    
	</bean> 
	

    
<!--  http://docs.spring.io/spring-data/mongodb/docs/current/reference/html/   

	<mongo:mongo host="ds039960.mongolab.com" port="39960" />  -->
	<!-- <mongo:mongo host="localhost" port="27017" />
	
	
	<bean id="mongoTemplate" class="org.springframework.data.mongodb.core.MongoTemplate">
    <constructor-arg name="mongo" ref="mongo"/>
    <constructor-arg name="databaseName" value="degloba"/>
  </bean>

  <bean class="org.springframework.data.mongodb.core.MongoExceptionTranslator"/>  

   Mongo cross-store aspect config  
  <bean class="org.springframework.data.mongodb.crossstore.MongoDocumentBacking"
        factory-method="aspectOf">
    <property name="changeSetPersister" ref="mongoChangeSetPersister"/>
  </bean>
  <bean id="mongoChangeSetPersister"
      class="org.springframework.data.mongodb.crossstore.MongoChangeSetPersister">
    <property name="mongoTemplate" ref="mongoTemplate"/>
    <property name="entityManagerFactory" ref="entityManagerFactoryMongo"/>  
  </bean>   -->
		
	<tx:annotation-driven transaction-manager="transactionManager" />
	
</beans>
